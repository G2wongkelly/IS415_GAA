<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Wong Kelly">

<title>Kelly’s IS415 GAA - Take-Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district level, DKI Jakarta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kelly’s IS415 GAA</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands_on_Ex/Hands_on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands_on_Ex/Hands_on_Ex02/Hands_on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-Class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex02/In_Class_Ex02.html">
 <span class="dropdown-text">In-Class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex03/In_Class_Ex03.html">
 <span class="dropdown-text">In-Class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex04/In_Class_Ex04.html">
 <span class="dropdown-text">In-Class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex05/In_Class_Ex05.html">
 <span class="dropdown-text">In-Class Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex06/In_Class_Ex06.html">
 <span class="dropdown-text">In-Class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex07/In_Class_Ex07.html">
 <span class="dropdown-text">In-Class Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In_Class_Ex/In_Class_Ex08/In_Class_Ex08.html">
 <span class="dropdown-text">In-Class Exercise 8</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-Home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take_Home_Ex/Take_Home_Ex01/Take_Home_Ex01.html">
 <span class="dropdown-text">Take-Home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take_Home_Ex/Take_Home_Ex02_EndMonths/Take_Home_Ex02.html">
 <span class="dropdown-text">Take-Home Exercise 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">1. Overview</a>
  <ul class="collapse">
  <li><a href="#problem-statement-objectives" id="toc-problem-statement-objectives" class="nav-link" data-scroll-target="#problem-statement-objectives">1.1 Problem Statement &amp; Objectives</a></li>
  </ul></li>
  <li><a href="#data-acquisition-source" id="toc-data-acquisition-source" class="nav-link" data-scroll-target="#data-acquisition-source"><strong>2. Data Acquisition Source</strong></a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">3. Getting started</a>
  <ul class="collapse">
  <li><a href="#installing-and-loading-the-r-packages" id="toc-installing-and-loading-the-r-packages" class="nav-link" data-scroll-target="#installing-and-loading-the-r-packages">3.1 Installing and Loading the R packages</a></li>
  </ul></li>
  <li><a href="#data-wrangling-geospatial-data-aspatial-data" id="toc-data-wrangling-geospatial-data-aspatial-data" class="nav-link" data-scroll-target="#data-wrangling-geospatial-data-aspatial-data">4. Data Wrangling: Geospatial Data &amp; Aspatial Data</a>
  <ul class="collapse">
  <li><a href="#importing-geospatial-data" id="toc-importing-geospatial-data" class="nav-link" data-scroll-target="#importing-geospatial-data"><strong>4.1 Importing Geospatial Data</strong></a>
  <ul class="collapse">
  <li><a href="#geospatial-data-pre-processing-cleaning" id="toc-geospatial-data-pre-processing-cleaning" class="nav-link" data-scroll-target="#geospatial-data-pre-processing-cleaning">4.1.1 Geospatial Data Pre-Processing (Cleaning)</a></li>
  <li><a href="#verifying-data-transformation" id="toc-verifying-data-transformation" class="nav-link" data-scroll-target="#verifying-data-transformation">4.1.2 Verifying &amp; Data Transformation</a></li>
  <li><a href="#verifying-removing-outer-islands" id="toc-verifying-removing-outer-islands" class="nav-link" data-scroll-target="#verifying-removing-outer-islands">4.1.3 Verifying &amp; Removing Outer Islands</a></li>
  <li><a href="#retaining-relevant-columns-renaming-them-with-translation-english" id="toc-retaining-relevant-columns-renaming-them-with-translation-english" class="nav-link" data-scroll-target="#retaining-relevant-columns-renaming-them-with-translation-english">4.1.4 Retaining relevant columns &amp; Renaming them with translation (English)</a></li>
  </ul></li>
  <li><a href="#importing-aspatial-data" id="toc-importing-aspatial-data" class="nav-link" data-scroll-target="#importing-aspatial-data"><strong>4.2 Importing Aspatial Data</strong></a>
  <ul class="collapse">
  <li><a href="#data-pre-processing-cleaning" id="toc-data-pre-processing-cleaning" class="nav-link" data-scroll-target="#data-pre-processing-cleaning"><strong>4.2.1 Data Pre-Processing (Cleaning)</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#joining-geospatial-aspatial-data-frames" id="toc-joining-geospatial-aspatial-data-frames" class="nav-link" data-scroll-target="#joining-geospatial-aspatial-data-frames">5. Joining Geospatial &amp; Aspatial data frames</a>
  <ul class="collapse">
  <li><a href="#investigating-correcting-mismatched-sub_district-records" id="toc-investigating-correcting-mismatched-sub_district-records" class="nav-link" data-scroll-target="#investigating-correcting-mismatched-sub_district-records">5.1 Investigating &amp; Correcting Mismatched Sub_District Records</a></li>
  </ul></li>
  <li><a href="#calculations" id="toc-calculations" class="nav-link" data-scroll-target="#calculations">6. Calculations</a></li>
  <li><a href="#mapping-monthly-vaccine-rate-12-months" id="toc-mapping-monthly-vaccine-rate-12-months" class="nav-link" data-scroll-target="#mapping-monthly-vaccine-rate-12-months">7. Mapping Monthly Vaccine Rate (12 months)</a>
  <ul class="collapse">
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">7.1 Analysis</a></li>
  </ul></li>
  <li><a href="#local-gi-analysis" id="toc-local-gi-analysis" class="nav-link" data-scroll-target="#local-gi-analysis">8. Local Gi* Analysis</a>
  <ul class="collapse">
  <li><a href="#computing-local-gi-statistics" id="toc-computing-local-gi-statistics" class="nav-link" data-scroll-target="#computing-local-gi-statistics">8.1 Computing local Gi* statistics</a></li>
  </ul></li>
  <li><a href="#emerging-hot-spot-analysis-ehsa" id="toc-emerging-hot-spot-analysis-ehsa" class="nav-link" data-scroll-target="#emerging-hot-spot-analysis-ehsa"><strong>9.Emerging Hot Spot Analysis (EHSA)</strong></a>
  <ul class="collapse">
  <li><a href="#mann-kendall-test" id="toc-mann-kendall-test" class="nav-link" data-scroll-target="#mann-kendall-test">9.1 Mann-Kendall Test</a>
  <ul class="collapse">
  <li><a href="#analysis-1" id="toc-analysis-1" class="nav-link" data-scroll-target="#analysis-1">9.1.1 Analysis</a></li>
  </ul></li>
  <li><a href="#ehsa-map-of-the-gi-values-of-vaccination-rate" id="toc-ehsa-map-of-the-gi-values-of-vaccination-rate" class="nav-link" data-scroll-target="#ehsa-map-of-the-gi-values-of-vaccination-rate">9.2 EHSA map of the Gi* values of vaccination rate</a>
  <ul class="collapse">
  <li><a href="#visualising-ehsa" id="toc-visualising-ehsa" class="nav-link" data-scroll-target="#visualising-ehsa">9.2.1 Visualising EHSA</a></li>
  <li><a href="#analysis-2" id="toc-analysis-2" class="nav-link" data-scroll-target="#analysis-2">9.2.2 Analysis</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references-resources-used" id="toc-references-resources-used" class="nav-link" data-scroll-target="#references-resources-used">10. References &amp; Resources Used</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district level, DKI Jakarta</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Wong Kelly </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 6, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="overview" class="level1">
<h1>1. Overview</h1>
<p>Since late December 2019, an outbreak of a novel coronavirus disease (COVID-19; previously known as 2019-nCoV) was reported in Wuhan, China, which had subsequently affected 210 countries worldwide. In general, COVID-19 is an acute resolved disease but it can also be deadly, with a 2% case fatality rate.</p>
<p>The COVID-19 vaccination in Indonesia is an ongoing mass immunisation in response to the COVID-19 pandemic in Indonesia. On 13 January 2021, the program commenced when President Joko Widodo was vaccinated at the presidential palace. In terms of total doses given, Indonesia ranks third in Asia and fifth in the world.</p>
<p><img src="images/549b2ae32b24e82a48c812462eac72dc.jpg" class="img-fluid"></p>
<p>According to wikipedia, as of 5 February 2023 at 18:00 WIB (UTC+7), 204,266,655 people had received the first dose of the vaccine and 175,131,893 people had been fully vaccinated; 69,597,474 of them had been inoculated with the booster or the third dose, while 1,585,164 had received the fourth dose. Jakarta has the highest percentage of population fully vaccinated with 103.46%, followed by Bali and Special Region of Yogyakarta with 85.45% and 83.02% respectively.</p>
<section id="problem-statement-objectives" class="level2">
<h2 class="anchored" data-anchor-id="problem-statement-objectives">1.1 Problem Statement &amp; Objectives</h2>
<p><em>Despite its compactness, the cumulative vaccination rate are not evenly distributed within DKI Jarkata. <strong>The question is where are the sub-districts with relatively higher number of vaccination rate and how they changed over time (July 2021 to June 2022).</strong></em></p>
<p>Exploratory Spatial Data Analysis (ESDA) hold tremendous potential to address complex problems facing society. In this study, students are tasked to apply appropriate Local Indicators of Spatial Association (LISA) and Emerging Hot Spot Analysis (EHSA) to undercover the spatio-temporal trends of COVID-19 vaccination in DKI Jakarta.</p>
</section>
</section>
<section id="data-acquisition-source" class="level1">
<h1><strong>2. Data Acquisition Source</strong></h1>
<p><strong><em>Apstial data</em></strong></p>
<p>For the purpose of this assignment, data from <a href="https://riwayat-file-vaksinasi-dki-jakarta-jakartagis.hub.arcgis.com/">Riwayat File Vaksinasi DKI Jakarta</a> will be used. Daily vaccination data are provides. You are only required to download either the first day of the month or last day of the month of the study period. I opted to download the last day of each month data during the period from July 2021 to June 2022.</p>
<p><strong><em>Geospatial data</em></strong></p>
<p>For the purpose of this study, DKI Jakarta administration boundary 2019 will be used. The data set can be downloaded at Indonesia Geospatial portal, specifically at <a href="https://www.indonesia-geospasial.com/2020/04/download-shapefile-shp-batas-desa.html">this page</a>.</p>
<p><strong><em>Data summary table</em></strong></p>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 32%">
<col style="width: 6%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Geospatial</td>
<td>Shapefile (SHP) Batas Desa Provinsi DKI Jakarta</td>
<td>shapefile</td>
<td>Sub-districts in DKI Jakarta</td>
</tr>
<tr class="even">
<td>Aspatial</td>
<td>Data Vaksinasi Berbasis Kelurahan dan Kecamatan (Monthly)</td>
<td>.xlsx</td>
<td>Sub-district level data of COVID-19 vaccine rates in DKI Jakarta between July 2021 and June 2022</td>
</tr>
</tbody>
</table>
</section>
<section id="getting-started" class="level1">
<h1>3. Getting started</h1>
<section id="installing-and-loading-the-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="installing-and-loading-the-r-packages">3.1 Installing and Loading the R packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf,tmap,tidyverse,sfdep,plotly,zoo,readxl,Kendall)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The R packages installed that we will be using for analysis are:</p>
<ul>
<li><p><strong>sf:</strong> used for importing, managing, and processing geospatial data</p></li>
<li><p><strong>tmap:</strong> used for creating thematic maps, such as choropleth and bubble maps</p></li>
<li><p><strong>tidyverse:</strong> a collection of packages for data science tasks</p></li>
<li><p><strong>sfdep:</strong> An interface for ‘spdep’ to integrate with ‘sf’ objects and the ‘tidyverse’</p></li>
<li><p><strong>plotly:</strong> used for creating interactive and dynamic visualisations in R</p></li>
<li><p><strong>zoo:</strong> A popular package for working with time series data</p></li>
<li><p><strong>readxl:</strong> read excel files (.xlsx)</p></li>
<li><p><strong>Kendall</strong>: provide a set of tools for working with Kendall’s rank correlation coefficient</p></li>
</ul>
</section>
</section>
<section id="data-wrangling-geospatial-data-aspatial-data" class="level1">
<h1>4. Data Wrangling: Geospatial Data &amp; Aspatial Data</h1>
<section id="importing-geospatial-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-geospatial-data"><strong>4.1 Importing Geospatial Data</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn=</span><span class="st">"data/geospatial"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">layer=</span><span class="st">"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source 
  `C:\G2wongkelly\IS415_GAA\Take_Home_Ex\Take_Home_Ex02_EndMonths\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<p>From the output message, we learn that:</p>
<ul>
<li><p>Geometry type is multipolygon</p></li>
<li><p>269 features and 161 fields</p></li>
<li><p>Assigned CRS is WGS 84 (geographic coordinate system)</p></li>
<li><p>Dimension is XY</p></li>
</ul>
<section id="geospatial-data-pre-processing-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="geospatial-data-pre-processing-cleaning">4.1.1 Geospatial Data Pre-Processing (Cleaning)</h3>
<p>Similar to our take-home assignment 1, before we can visualise our datasets and do the necessary analysis, we have to do data cleaning which is an important step in any data science task including geospatial data science. Things to check:</p>
<ul>
<li><p>Invalid geometries</p></li>
<li><p>Missing value</p></li>
</ul>
<p><strong><em>(1) Invalid geometries</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">which</span>(<span class="fu">st_is_valid</span>(bd_jakarta) <span class="sc">==</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p><strong><em>(2) Missing value</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(bd_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 2 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.8412 ymin: -6.154036 xmax: 106.8612 ymax: -6.144973
Geodetic CRS:  WGS 84
    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA KECAMATAN
243     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     &lt;NA&gt;      &lt;NA&gt;
244     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     &lt;NA&gt;      &lt;NA&gt;
    DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN PERPINDAHA JUMLAH_MEN
243       &lt;NA&gt;          0         0          0         0          0          0
244       &lt;NA&gt;          0         0          0         0          0          0
    PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK HINDU BUDHA KONGHUCU KEPERCAYAA
243         0         0     0       0        0     0     0        0          0
244         0         0     0       0        0     0     0        0          0
    PRIA WANITA BELUM_KAWI KAWIN CERAI_HIDU CERAI_MATI U0 U5 U10 U15 U20 U25
243    0      0          0     0          0          0  0  0   0   0   0   0
244    0      0          0     0          0          0  0  0   0   0   0   0
    U30 U35 U40 U45 U50 U55 U60 U65 U70 U75 TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP
243   0   0   0   0   0   0   0   0   0   0          0          0        0    0
244   0   0   0   0   0   0   0   0   0   0          0          0        0    0
    SLTA DIPLOMA_I DIPLOMA_II DIPLOMA_IV STRATA_II STRATA_III BELUM_TIDA
243    0         0          0          0         0          0          0
244    0         0          0          0         0          0          0
    APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN NELAYAN AGAMA_DAN PELAJAR_MA
243          0          0          0         0       0         0          0
244          0          0          0         0       0         0          0
    TENAGA_KES PENSIUNAN LAINNYA GENERATED KODE_DES_1 BELUM_ MENGUR_ PELAJAR_
243          0         0       0      &lt;NA&gt;       &lt;NA&gt;      0       0        0
244          0         0       0      &lt;NA&gt;       &lt;NA&gt;      0       0        0
    PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN PERDAG_ PETANI PETERN_ NELAYAN_1
243          0        0       0          0       0      0       0         0
244          0        0       0          0       0      0       0         0
    INDUSTR_ KONSTR_ TRANSP_ KARYAW_ KARYAW1 KARYAW1_1 KARYAW1_12 BURUH BURUH_
243        0       0       0       0       0         0          0     0      0
244        0       0       0       0       0         0          0     0      0
    BURUH1 BURUH1_1 PEMBANT_ TUKANG TUKANG_1 TUKANG_12 TUKANG__13 TUKANG__14
243      0        0        0      0        0         0          0          0
244      0        0        0      0        0         0          0          0
    TUKANG__15 TUKANG__16 TUKANG__17 PENATA PENATA_ PENATA1_1 MEKANIK SENIMAN_
243          0          0          0      0       0         0       0        0
244          0          0          0      0       0         0       0        0
    TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M PENDETA PASTOR WARTAWAN USTADZ JURU_M
243     0       0        0       0      0       0      0        0      0      0
244     0       0        0       0      0       0      0        0      0      0
    PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1 PRESIDEN WAKIL_PRES ANGGOTA1_2
243      0        0        0          0        0          0          0
244      0        0        0          0        0          0          0
    ANGGOTA1_3 DUTA_B GUBERNUR WAKIL_GUBE BUPATI WAKIL_BUPA WALIKOTA WAKIL_WALI
243          0      0        0          0      0          0        0          0
244          0      0        0          0      0          0        0          0
    ANGGOTA1_4 ANGGOTA1_5 DOSEN GURU PILOT PENGACARA_ NOTARIS ARSITEK AKUNTA_
243          0          0     0    0     0          0       0       0       0
244          0          0     0    0     0          0       0       0       0
    KONSUL_ DOKTER BIDAN PERAWAT APOTEK_ PSIKIATER PENYIA_ PENYIA1 PELAUT
243       0      0     0       0       0         0       0       0      0
244       0      0     0       0       0         0       0       0      0
    PENELITI SOPIR PIALAN PARANORMAL PEDAGA_ PERANG_ KEPALA_ BIARAW_ WIRASWAST_
243        0     0      0          0       0       0       0       0          0
244        0     0      0          0       0       0       0       0          0
    LAINNYA_12 LUAS_DESA KODE_DES_3 DESA_KEL_1 KODE_12
243          0         0       &lt;NA&gt;       &lt;NA&gt;       0
244          0         0       &lt;NA&gt;       &lt;NA&gt;       0
                          geometry
243 MULTIPOLYGON (((106.8612 -6...
244 MULTIPOLYGON (((106.8504 -6...</code></pre>
</div>
</div>
<p>From the output generated above, we can tell that there are two particulars rows with missing values for KAB_KOTA (City), KECAMATAN (District), and DESA_KELUR (Village), as well as other fields such as OBJECT_ID 25645 and 25646. Therefore, we will need to remove them from the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove rows that have an NA value in DESA_KELUR</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(bd_jakarta,<span class="fu">c</span>(<span class="st">"DESA_KELUR"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check if there are any more missing values</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta[<span class="fu">rowSums</span>(<span class="fu">is.na</span>(bd_jakarta))<span class="sc">!=</span><span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 0 features and 161 fields
Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA
Geodetic CRS:  WGS 84
  [1] OBJECT_ID  KODE_DESA  DESA       KODE       PROVINSI   KAB_KOTA  
  [7] KECAMATAN  DESA_KELUR JUMLAH_PEN JUMLAH_KK  LUAS_WILAY KEPADATAN 
 [13] PERPINDAHA JUMLAH_MEN PERUBAHAN  WAJIB_KTP  SILAM      KRISTEN   
 [19] KHATOLIK   HINDU      BUDHA      KONGHUCU   KEPERCAYAA PRIA      
 [25] WANITA     BELUM_KAWI KAWIN      CERAI_HIDU CERAI_MATI U0        
 [31] U5         U10        U15        U20        U25        U30       
 [37] U35        U40        U45        U50        U55        U60       
 [43] U65        U70        U75        TIDAK_BELU BELUM_TAMA TAMAT_SD  
 [49] SLTP       SLTA       DIPLOMA_I  DIPLOMA_II DIPLOMA_IV STRATA_II 
 [55] STRATA_III BELUM_TIDA APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN 
 [61] NELAYAN    AGAMA_DAN  PELAJAR_MA TENAGA_KES PENSIUNAN  LAINNYA   
 [67] GENERATED  KODE_DES_1 BELUM_     MENGUR_    PELAJAR_   PENSIUNA_1
 [73] PEGAWAI_   TENTARA    KEPOLISIAN PERDAG_    PETANI     PETERN_   
 [79] NELAYAN_1  INDUSTR_   KONSTR_    TRANSP_    KARYAW_    KARYAW1   
 [85] KARYAW1_1  KARYAW1_12 BURUH      BURUH_     BURUH1     BURUH1_1  
 [91] PEMBANT_   TUKANG     TUKANG_1   TUKANG_12  TUKANG__13 TUKANG__14
 [97] TUKANG__15 TUKANG__16 TUKANG__17 PENATA     PENATA_    PENATA1_1 
[103] MEKANIK    SENIMAN_   TABIB      PARAJI_    PERANCA_   PENTER_   
[109] IMAM_M     PENDETA    PASTOR     WARTAWAN   USTADZ     JURU_M    
[115] PROMOT     ANGGOTA_   ANGGOTA1   ANGGOTA1_1 PRESIDEN   WAKIL_PRES
[121] ANGGOTA1_2 ANGGOTA1_3 DUTA_B     GUBERNUR   WAKIL_GUBE BUPATI    
[127] WAKIL_BUPA WALIKOTA   WAKIL_WALI ANGGOTA1_4 ANGGOTA1_5 DOSEN     
[133] GURU       PILOT      PENGACARA_ NOTARIS    ARSITEK    AKUNTA_   
[139] KONSUL_    DOKTER     BIDAN      PERAWAT    APOTEK_    PSIKIATER 
[145] PENYIA_    PENYIA1    PELAUT     PENELITI   SOPIR      PIALAN    
[151] PARANORMAL PEDAGA_    PERANG_    KEPALA_    BIARAW_    WIRASWAST_
[157] LAINNYA_12 LUAS_DESA  KODE_DES_3 DESA_KEL_1 KODE_12    geometry  
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Great! The data now is cleaned with no missing values! :)</p>
</section>
<section id="verifying-data-transformation" class="level3">
<h3 class="anchored" data-anchor-id="verifying-data-transformation">4.1.2 Verifying &amp; Data Transformation</h3>
<p>Let’s firs retrieve the coordinate systems of bd_jakarta.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>According to the output message above, we learn that the current assigned coordinate system is WGS 84, the “World Geodetic System 1984”. However, in the context of this data set, it is an Indonesian-specific geospatial data set. Therefore, we should be using the national CRS of Indonesia, <strong>DGN95, the “Datum Geodesi Nasional 1995”, ESPG code 23845</strong>. Let’s rectify that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#transform WGS84 to DGN95, ESPG code 23845</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(bd_jakarta, <span class="dv">23845</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: EPSG:23845 
  wkt:
PROJCRS["DGN95 / Indonesia TM-3 zone 54.1",
    BASEGEOGCRS["DGN95",
        DATUM["Datum Geodesi Nasional 1995",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4755]],
    CONVERSION["Indonesia TM-3 zone 54.1",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",139.5,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9999,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",200000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",1500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["easting (X)",east,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["northing (Y)",north,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["Cadastre."],
        AREA["Indonesia - onshore east of 138°E."],
        BBOX[-9.19,138,-1.49,141.01]],
    ID["EPSG",23845]]</code></pre>
</div>
</div>
<p>From the above output message, we can tell that the original coordinate system (WGS 84) has been successfully transformed to Indonesia coordinate system (DGN 95).</p>
<p>Now, let’s plot the geometry to quickly visualise the data.</p>
</section>
<section id="verifying-removing-outer-islands" class="level3">
<h3 class="anchored" data-anchor-id="verifying-removing-outer-islands">4.1.3 Verifying &amp; Removing Outer Islands</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(bd_jakarta))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As we can see, bd_jakarta includes both the mainland and the outer islands. However, in the context of this assignment, we are not interested in the outer islands. Therefore, we can eliminate them out.</p>
<p>We will first output the unique values of PROVINSE (province) and KAB_KOTA (city) fields to inspect the distribution of clusters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># outputs unique values of province and city fields</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JAKARTA BARAT"    "JAKARTA PUSAT"    "KEPULAUAN SERIBU" "JAKARTA UTARA"   
[5] "JAKARTA TIMUR"    "JAKARTA SELATAN" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_jakarta<span class="sc">$</span><span class="st">"PROVINSI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "DKI JAKARTA"</code></pre>
</div>
</div>
<p>Noticed from the output message above, the province are the same for all rows. However, as for KAB_KOTA, cities of Jakarta, realised that most of the cities have a JAKARTA prefix except for KEPULAUAN SERIBU (translated to ‘Thousand Islands’) refers to the outer islands. Just to check, we will plot the geometry of the geospatial data set once again with cluster of colours.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bd_jakarta) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we can clearly identify the outer islands and they are the “orange” mini clusters spreading outside the main islands. We will then remove them from our data set:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> <span class="fu">filter</span>(bd_jakarta, KAB_KOTA <span class="sc">!=</span> <span class="st">"KEPULAUAN SERIBU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us check if they are all removed by plotting the map again!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bd_jakarta) <span class="sc">+</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">"KAB_KOTA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Yes! we have successfully excluded the outer islands from the map and left us with only the mainland which are the cities that start with the “JAKARTA” prefix.</p>
</section>
<section id="retaining-relevant-columns-renaming-them-with-translation-english" class="level3">
<h3 class="anchored" data-anchor-id="retaining-relevant-columns-renaming-them-with-translation-english">4.1.4 Retaining relevant columns &amp; Renaming them with translation (English)</h3>
<p>There are too many columns in the date file bd_jakarta and we will need to only retain the fields that are relevant to our analysis which are the first 9 fields in the bd_jakarta data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> bd_jakarta[, <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we need to also rename the retained columns to English language for ease of understanding for analysis later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>bd_jakarta <span class="ot">&lt;-</span> bd_jakarta <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Object_ID=</span>OBJECT_ID,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Province=</span>PROVINSI, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">City=</span>KAB_KOTA, </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">District=</span>KECAMATAN, </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village_Code=</span>KODE_DESA, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Village=</span>DESA, </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sub_District=</span>DESA_KELUR,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Code=</span>KODE, </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Population=</span>JUMLAH_PEN</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We are done with our Geospatial data processing and now let’s move on the Aspatial data!</p>
</section>
</section>
<section id="importing-aspatial-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-aspatial-data"><strong>4.2 Importing Aspatial Data</strong></h2>
<p>In our “data/aspatial” folder, we have multiple sub-district level data of COVID-19 cases in DKI Jarkata between July 2021 to June 2022. Therefore, we would want to find a more efficient way to import all of them instead of one by one.</p>
<p>In the code chunk below, the <strong><code>list.files()</code></strong> function is used to list all the files in the directory “data/aspatial/” that match the pattern “*.xlsx”. The resulting file names are stored in the <strong><code>xlsx_files</code></strong> variable.</p>
<p>The <strong><code>lapply()</code></strong> function is used to iterate over the elements of <strong><code>xlsx_files</code></strong>, i.e., the file names, and apply the function provided in the second argument to each element. The function provided reads in the Excel file using the <strong><code>read_xlsx()</code></strong> function from the <strong><code>readxl</code></strong> package and returns a data frame.</p>
<p>The resulting list of data frames is stored in the <strong><code>data_list</code></strong> variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>xlsx_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">"data/aspatial/"</span>, <span class="at">pattern =</span> <span class="st">"*.xlsx"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>data_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(xlsx_files, <span class="cf">function</span>(file) {</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_xlsx</span>(<span class="fu">paste</span>(<span class="st">"data/aspatial/"</span>, file, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data-pre-processing-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="data-pre-processing-cleaning"><strong>4.2.1 Data Pre-Processing (Cleaning)</strong></h3>
<p>Firstly, let’s take a quick glance of all the data sets in the list of imported aspatial files.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1517196 7424015 6590380  1.40e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4592   19355   16687  3.60e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5319   24062   20738  4.48e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5903   23171   19754  4.29e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    1649    8103    7245  1.53e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    4030   22255   20160  4.24e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3950   17616   15662  3.33e4
 8 3175051002    JAKART… PASAR … BARU      23886    3344   20542   18754  3.93e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    9382   38516   33404  7.19e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    3772   17722   16033  3.38e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[2]]
# A tibble: 268 × 34
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1453423 7487788 6727002 2720796
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4449   19498   17027    6568
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5101   24280   21134    8915
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5699   23375   20315    6491
 5 3175031003    JAKART… JATINE… BALI M…    9752    1598    8154    7395    3225
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    3857   22428   20483    8166
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3818   17748   15958    5494
 8 3175051002    JAKART… PASAR … BARU      23886    3160   20726   19107    9336
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    9041   38857   34244   12107
10 3171071002    JAKART… TANAH … BENDUN…   21494    3627   17867   16306    7651
# … with 258 more rows, 25 more variables: `TOTAL VAKSIN\r\nDIBERIKAN` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 1` &lt;dbl&gt;, `LANSIA\r\nDOSIS 2` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 3` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 3` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;, …

[[3]]
# A tibble: 268 × 34
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1431393 7509818 6756584 3031594
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4402   19545   17106    7369
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5041   24340   21213   10086
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5632   23442   20416    7398
 5 3175031003    JAKART… JATINE… BALI M…    9752    1576    8176    7427    3602
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    3791   22494   20563    9190
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3778   17788   16023    6170
 8 3175051002    JAKART… PASAR … BARU      23886    3110   20776   19161   10067
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    8917   38981   34405   13732
10 3171071002    JAKART… TANAH … BENDUN…   21494    3580   17914   16378    8434
# … with 258 more rows, 25 more variables: `TOTAL VAKSIN\r\nDIBERIKAN` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 1` &lt;dbl&gt;, `LANSIA\r\nDOSIS 2` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 3` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 3` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;, …

[[4]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1723821 7217390 6172636  1.34e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    5527   18420   15466  3.39e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5986   23395   19404  4.28e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    6802   22272   18084  4.04e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    1920    7832    6773  1.46e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    4612   21673   18694  4.04e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    4346   17220   14694  3.19e4
 8 3175051002    JAKART… PASAR … BARU      23886    3776   20110   17781  3.79e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   10985   36913   30676  6.76e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    4187   17307   15114  3.24e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[5]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 2235772 6705439 5171697  1.19e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    6688   17259   13376  3.06e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    7581   21800   16438  3.82e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    8708   20366   14412  3.48e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    2517    7235    5660  1.29e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    6252   20033   15380  3.54e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    5785   15781   12158  2.79e4
 8 3175051002    JAKART… PASAR … BARU      23886    4899   18987   15536  3.45e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   14105   33793   24706  5.85e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    5239   16255   12764  2.90e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[6]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 3277484 5663727 3412906 9076633
 2 3172051003    JAKART… PADEMA… ANCOL     23947    9191   14756    8935   23691
 3 3173041007    JAKART… TAMBORA ANGKE     29381   10400   18981   10470   29451
 4 3175041005    JAKART… KRAMAT… BALE K…   29074   12510   16564    7766   24330
 5 3175031003    JAKART… JATINE… BALI M…    9752    3704    6048    3671    9719
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    9416   16869   10118   26987
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    8345   13221    8177   21398
 8 3175051002    JAKART… PASAR … BARU      23886    7751   16135   11238   27373
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   19908   27990   15342   43332
10 3171071002    JAKART… TANAH … BENDUN…   21494    8033   13461    8671   22132
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[7]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1623736 7317475 6370175  1.37e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    5062   18885   15996  3.49e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5626   23755   20026  4.38e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    6335   22739   18925  4.17e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    1782    7970    7003  1.50e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    4373   21912   19400  4.13e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    4169   17397   15138  3.25e4
 8 3175051002    JAKART… PASAR … BARU      23886    3579   20307   18239  3.85e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   10178   37720   32015  6.97e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    3993   17501   15541  3.30e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[8]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1538221 7402990 6516678  1.39e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4647   19300   16477  3.58e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5388   23993   20463  4.45e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5967   23107   19468  4.26e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    1678    8074    7176  1.52e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    4077   22208   19966  4.22e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3993   17573   15502  3.31e4
 8 3175051002    JAKART… PASAR … BARU      23886    3398   20488   18580  3.91e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    9516   38382   32972  7.14e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    3813   17681   15870  3.36e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[9]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 4441501 4499710 1663218 6162928
 2 3172051003    JAKART… PADEMA… ANCOL     23947   12333   11614    4181   15795
 3 3173041007    JAKART… TAMBORA ANGKE     29381   13875   15506    4798   20304
 4 3175041005    JAKART… KRAMAT… BALE K…   29074   18314   10760    3658   14418
 5 3175031003    JAKART… JATINE… BALI M…    9752    5173    4579    2007    6586
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285   13775   12510    5206   17716
 7 3174031002    JAKART… MAMPAN… BANGKA    21566   10443   11123    4010   15133
 8 3175051002    JAKART… PASAR … BARU      23886   10063   13823    6118   19941
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   28848   19050    7261   26311
10 3171071002    JAKART… TANAH … BENDUN…   21494    9978   11516    4602   16118
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …

[[10]]
# A tibble: 268 × 34
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1482471 7458740 6682911 1836511
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4522   19425   16909    3934
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5186   24195   21000    6122
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5780   23294   20123    4124
 5 3175031003    JAKART… JATINE… BALI M…    9752    1621    8131    7332    2159
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    3947   22338   20349    5258
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3889   17677   15882    3835
 8 3175051002    JAKART… PASAR … BARU      23886    3220   20666   18985    6863
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    9158   38740   33947    8039
10 3171071002    JAKART… TANAH … BENDUN…   21494    3693   17801   16227    5533
# … with 258 more rows, 25 more variables: `TOTAL VAKSIN\r\nDIBERIKAN` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 1` &lt;dbl&gt;, `LANSIA\r\nDOSIS 2` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 3` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 3` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;, …

[[11]]
# A tibble: 268 × 34
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1445540 7495671 6743764 2885301
 2 3172051003    JAKART… PADEMA… ANCOL     23947    4440   19507   17077    7022
 3 3173041007    JAKART… TAMBORA ANGKE     29381    5084   24297   21182    9484
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    5676   23398   20373    7030
 5 3175031003    JAKART… JATINE… BALI M…    9752    1589    8163    7413    3413
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    3834   22451   20530    8594
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    3804   17762   15995    5825
 8 3175051002    JAKART… PASAR … BARU      23886    3147   20739   19138    9781
 9 3175041004    JAKART… KRAMAT… BATU A…   47898    8989   38909   34340   12984
10 3171071002    JAKART… TANAH … BENDUN…   21494    3609   17885   16349    8089
# … with 258 more rows, 25 more variables: `TOTAL VAKSIN\r\nDIBERIKAN` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 1` &lt;dbl&gt;, `LANSIA\r\nDOSIS 2` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 3` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 3` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;, …

[[12]]
# A tibble: 268 × 27
   KODE KELURA…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸
   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;          &lt;NA&gt;    &lt;NA&gt;    TOTAL   8941211 1880524 7060687 5729001  1.28e7
 2 3172051003    JAKART… PADEMA… ANCOL     23947    5991   17956   14504  3.25e4
 3 3173041007    JAKART… TAMBORA ANGKE     29381    6557   22824   18185  4.10e4
 4 3175041005    JAKART… KRAMAT… BALE K…   29074    7586   21488   16444  3.79e4
 5 3175031003    JAKART… JATINE… BALI M…    9752    2125    7627    6277  1.39e4
 6 3175101006    JAKART… CIPAYU… BAMBU …   26285    5014   21271   17291  3.86e4
 7 3174031002    JAKART… MAMPAN… BANGKA    21566    4742   16824   13579  3.04e4
 8 3175051002    JAKART… PASAR … BARU      23886    4089   19797   16697  3.65e4
 9 3175041004    JAKART… KRAMAT… BATU A…   47898   12196   35702   27942  6.36e4
10 3171071002    JAKART… TANAH … BENDUN…   21494    4492   17002   14176  3.12e4
# … with 258 more rows, 18 more variables: `LANSIA\r\nDOSIS 1` &lt;dbl&gt;,
#   `LANSIA\r\nDOSIS 2` &lt;dbl&gt;, `LANSIA TOTAL \r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `PELAYAN PUBLIK\r\nDOSIS 1` &lt;dbl&gt;, `PELAYAN PUBLIK\r\nDOSIS 2` &lt;dbl&gt;,
#   `PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `GOTONG ROYONG\r\nDOSIS 1` &lt;dbl&gt;, `GOTONG ROYONG\r\nDOSIS 2` &lt;dbl&gt;,
#   `GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN` &lt;dbl&gt;,
#   `TENAGA KESEHATAN\r\nDOSIS 1` &lt;dbl&gt;, `TENAGA KESEHATAN\r\nDOSIS 2` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Next, we are interested to know what are the columns available in each aspatial data file. Since we do not require all the columns, we then need to understand what are the columns needed for our analysis and retain them in the later part.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the column names for each data frame in data_list</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>column_names <span class="ot">&lt;-</span> <span class="fu">map</span>(data_list, colnames)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>column_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[2]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "JUMLAH\r\nDOSIS 3"                         
[10] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[11] "LANSIA\r\nDOSIS 1"                         
[12] "LANSIA\r\nDOSIS 2"                         
[13] "LANSIA\r\nDOSIS 3"                         
[14] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[15] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[16] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[17] "PELAYAN PUBLIK\r\nDOSIS 3"                 
[18] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[19] "GOTONG ROYONG\r\nDOSIS 1"                  
[20] "GOTONG ROYONG\r\nDOSIS 2"                  
[21] "GOTONG ROYONG\r\nDOSIS 3"                  
[22] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[23] "TENAGA KESEHATAN\r\nDOSIS 1"               
[24] "TENAGA KESEHATAN\r\nDOSIS 2"               
[25] "TENAGA KESEHATAN\r\nDOSIS 3"               
[26] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[27] "TAHAPAN 3\r\nDOSIS 1"                      
[28] "TAHAPAN 3\r\nDOSIS 2"                      
[29] "TAHAPAN 3\r\nDOSIS 3"                      
[30] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[31] "REMAJA\r\nDOSIS 1"                         
[32] "REMAJA\r\nDOSIS 2"                         
[33] "REMAJA\r\nDOSIS 3"                         
[34] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[3]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "JUMLAH\r\nDOSIS 3"                         
[10] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[11] "LANSIA\r\nDOSIS 1"                         
[12] "LANSIA\r\nDOSIS 2"                         
[13] "LANSIA\r\nDOSIS 3"                         
[14] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[15] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[16] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[17] "PELAYAN PUBLIK\r\nDOSIS 3"                 
[18] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[19] "GOTONG ROYONG\r\nDOSIS 1"                  
[20] "GOTONG ROYONG\r\nDOSIS 2"                  
[21] "GOTONG ROYONG\r\nDOSIS 3"                  
[22] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[23] "TENAGA KESEHATAN\r\nDOSIS 1"               
[24] "TENAGA KESEHATAN\r\nDOSIS 2"               
[25] "TENAGA KESEHATAN\r\nDOSIS 3"               
[26] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[27] "TAHAPAN 3\r\nDOSIS 1"                      
[28] "TAHAPAN 3\r\nDOSIS 2"                      
[29] "TAHAPAN 3\r\nDOSIS 3"                      
[30] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[31] "REMAJA\r\nDOSIS 1"                         
[32] "REMAJA\r\nDOSIS 2"                         
[33] "REMAJA\r\nDOSIS 3"                         
[34] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[4]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[5]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[6]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[7]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[8]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[9]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[10]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "JUMLAH\r\nDOSIS 3"                         
[10] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[11] "LANSIA\r\nDOSIS 1"                         
[12] "LANSIA\r\nDOSIS 2"                         
[13] "LANSIA\r\nDOSIS 3"                         
[14] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[15] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[16] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[17] "PELAYAN PUBLIK\r\nDOSIS 3"                 
[18] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[19] "GOTONG ROYONG\r\nDOSIS 1"                  
[20] "GOTONG ROYONG\r\nDOSIS 2"                  
[21] "GOTONG ROYONG\r\nDOSIS 3"                  
[22] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[23] "TENAGA KESEHATAN\r\nDOSIS 1"               
[24] "TENAGA KESEHATAN\r\nDOSIS 2"               
[25] "TENAGA KESEHATAN\r\nDOSIS 3"               
[26] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[27] "TAHAPAN 3\r\nDOSIS 1"                      
[28] "TAHAPAN 3\r\nDOSIS 2"                      
[29] "TAHAPAN 3\r\nDOSIS 3"                      
[30] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[31] "REMAJA\r\nDOSIS 1"                         
[32] "REMAJA\r\nDOSIS 2"                         
[33] "REMAJA\r\nDOSIS 3"                         
[34] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[11]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "JUMLAH\r\nDOSIS 3"                         
[10] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[11] "LANSIA\r\nDOSIS 1"                         
[12] "LANSIA\r\nDOSIS 2"                         
[13] "LANSIA\r\nDOSIS 3"                         
[14] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[15] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[16] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[17] "PELAYAN PUBLIK\r\nDOSIS 3"                 
[18] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[19] "GOTONG ROYONG\r\nDOSIS 1"                  
[20] "GOTONG ROYONG\r\nDOSIS 2"                  
[21] "GOTONG ROYONG\r\nDOSIS 3"                  
[22] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[23] "TENAGA KESEHATAN\r\nDOSIS 1"               
[24] "TENAGA KESEHATAN\r\nDOSIS 2"               
[25] "TENAGA KESEHATAN\r\nDOSIS 3"               
[26] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[27] "TAHAPAN 3\r\nDOSIS 1"                      
[28] "TAHAPAN 3\r\nDOSIS 2"                      
[29] "TAHAPAN 3\r\nDOSIS 3"                      
[30] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[31] "REMAJA\r\nDOSIS 1"                         
[32] "REMAJA\r\nDOSIS 2"                         
[33] "REMAJA\r\nDOSIS 3"                         
[34] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          

[[12]]
 [1] "KODE KELURAHAN"                            
 [2] "WILAYAH KOTA"                              
 [3] "KECAMATAN"                                 
 [4] "KELURAHAN"                                 
 [5] "SASARAN"                                   
 [6] "BELUM VAKSIN"                              
 [7] "JUMLAH\r\nDOSIS 1"                         
 [8] "JUMLAH\r\nDOSIS 2"                         
 [9] "TOTAL VAKSIN\r\nDIBERIKAN"                 
[10] "LANSIA\r\nDOSIS 1"                         
[11] "LANSIA\r\nDOSIS 2"                         
[12] "LANSIA TOTAL \r\nVAKSIN DIBERIKAN"         
[13] "PELAYAN PUBLIK\r\nDOSIS 1"                 
[14] "PELAYAN PUBLIK\r\nDOSIS 2"                 
[15] "PELAYAN PUBLIK TOTAL\r\nVAKSIN DIBERIKAN"  
[16] "GOTONG ROYONG\r\nDOSIS 1"                  
[17] "GOTONG ROYONG\r\nDOSIS 2"                  
[18] "GOTONG ROYONG TOTAL\r\nVAKSIN DIBERIKAN"   
[19] "TENAGA KESEHATAN\r\nDOSIS 1"               
[20] "TENAGA KESEHATAN\r\nDOSIS 2"               
[21] "TENAGA KESEHATAN TOTAL\r\nVAKSIN DIBERIKAN"
[22] "TAHAPAN 3\r\nDOSIS 1"                      
[23] "TAHAPAN 3\r\nDOSIS 2"                      
[24] "TAHAPAN 3 TOTAL\r\nVAKSIN DIBERIKAN"       
[25] "REMAJA\r\nDOSIS 1"                         
[26] "REMAJA\r\nDOSIS 2"                         
[27] "REMAJA TOTAL\r\nVAKSIN DIBERIKAN"          </code></pre>
</div>
</div>
<p>From the generated output message, I realised the differences were due to column names such as: ” DOSIS 3”. The reason could be due to the government’s increasing immunization rates for various demographic groups and the quantity of vaccinations distributed across the country.</p>
<p>However, the primary interest in this study is to analyse COVID-19 vaccination trends at the sub-district level, DKI Jakarta. Therefore, the breakdown of different demographics vaccination progress are less of our concern and we should eliminate them from the data sets.</p>
<p>Our columns of interest (those that are relevant to our analysis and we will keep) -&gt; they are common in all data files therefore we can extract them:</p>
<ul>
<li><p>Kode Kelurahan (Village Code)</p></li>
<li><p>Wilayah Kota (City Area)</p></li>
<li><p>Kelurahan (Sub-District)</p></li>
<li><p>Sasaran (Target)</p></li>
<li><p>Belum Vaksin (Not Yet Vaccinated)</p></li>
<li><p>Total Vaksin Diberikan (Total Vaccine Given)</p></li>
</ul>
<p>Now that we know our requirements, we can process the data step-by-step:</p>
<p><strong><em>Step 1: Retain only the 6 relevant columns for all 12 data sets imported earlier</em></strong></p>
<p>In this code, the map() function iterates through each data frame in the list my_data and applies the select() function to select the stated column names. The resulting list of data frames is stored in the variable my_data_same_columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>my_data_same_columns <span class="ot">&lt;-</span> <span class="fu">map</span>(data_list, <span class="sc">~</span><span class="fu">select</span>(.x, <span class="st">"KODE KELURAHAN"</span>, <span class="st">"WILAYAH KOTA"</span>,<span class="st">"SASARAN"</span>,<span class="st">"KELURAHAN"</span>,<span class="st">"BELUM VAKSIN"</span>,<span class="st">"TOTAL VAKSIN</span><span class="sc">\r\n</span><span class="st">DIBERIKAN"</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>my_data_same_columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1517196  1.40e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4592  3.60e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5319  4.48e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5903  4.29e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1649  1.53e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              4030  4.24e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3950  3.33e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3344  3.93e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              9382  7.19e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3772  3.38e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[2]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1453423  1.69e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4449  4.31e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5101  5.43e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5699  5.02e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1598  1.88e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              3857  5.11e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3818  3.92e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3160  4.92e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              9041  8.52e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3627  4.18e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[3]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1431393  1.73e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4402  4.40e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5041  5.56e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5632  5.13e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1576  1.92e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              3791  5.22e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3778  4.00e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3110  5.00e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              8917  8.71e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3580  4.27e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[4]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1723821  1.34e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   5527  3.39e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5986  4.28e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            6802  4.04e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1920  1.46e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              4612  4.04e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  4346  3.19e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3776  3.79e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             10985  6.76e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         4187  3.24e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[5]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                2235772  1.19e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   6688  3.06e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   7581  3.82e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            8708  3.48e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             2517  1.29e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              6252  3.54e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  5785  2.79e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    4899  3.45e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             14105  5.85e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         5239  2.90e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[6]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                3277484 9076633
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   9191   23691
 3 3173041007       JAKARTA BARAT     29381 ANGKE                  10400   29451
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG           12510   24330
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             3704    9719
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              9416   26987
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  8345   21398
 8 3175051002       JAKARTA TIMUR     23886 BARU                    7751   27373
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             19908   43332
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         8033   22132
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[7]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1623736  1.37e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   5062  3.49e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5626  4.38e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            6335  4.17e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1782  1.50e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              4373  4.13e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  4169  3.25e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3579  3.85e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             10178  6.97e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3993  3.30e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[8]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1538221  1.39e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4647  3.58e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5388  4.45e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5967  4.26e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1678  1.52e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              4077  4.22e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3993  3.31e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3398  3.91e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              9516  7.14e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3813  3.36e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[9]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                4441501 6162928
 2 3172051003       JAKARTA UTARA     23947 ANCOL                  12333   15795
 3 3173041007       JAKARTA BARAT     29381 ANGKE                  13875   20304
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG           18314   14418
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             5173    6586
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS             13775   17716
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                 10443   15133
 8 3175051002       JAKARTA TIMUR     23886 BARU                   10063   19941
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             28848   26311
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         9978   16118
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[10]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1482471  1.60e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4522  4.03e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5186  5.13e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5780  4.75e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1621  1.76e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              3947  4.79e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3889  3.74e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3220  4.65e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              9158  8.07e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3693  3.96e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[11]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1445540  1.71e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   4440  4.36e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   5084  5.50e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            5676  5.08e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             1589  1.90e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              3834  5.16e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  3804  3.96e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    3147  4.97e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR              8989  8.62e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         3609  4.23e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`

[[12]]
# A tibble: 268 × 6
   `KODE KELURAHAN` `WILAYAH KOTA`  SASARAN KELURAHAN       BELUM VAKS…¹ TOTAL…²
   &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
 1 &lt;NA&gt;             &lt;NA&gt;            8941211 TOTAL                1880524  1.28e7
 2 3172051003       JAKARTA UTARA     23947 ANCOL                   5991  3.25e4
 3 3173041007       JAKARTA BARAT     29381 ANGKE                   6557  4.10e4
 4 3175041005       JAKARTA TIMUR     29074 BALE KAMBANG            7586  3.79e4
 5 3175031003       JAKARTA TIMUR      9752 BALI MESTER             2125  1.39e4
 6 3175101006       JAKARTA TIMUR     26285 BAMBU APUS              5014  3.86e4
 7 3174031002       JAKARTA SELATAN   21566 BANGKA                  4742  3.04e4
 8 3175051002       JAKARTA TIMUR     23886 BARU                    4089  3.65e4
 9 3175041004       JAKARTA TIMUR     47898 BATU AMPAR             12196  6.36e4
10 3171071002       JAKARTA PUSAT     21494 BENDUNGAN HILIR         4492  3.12e4
# … with 258 more rows, and abbreviated variable names ¹​`BELUM VAKSIN`,
#   ²​`TOTAL VAKSIN\r\nDIBERIKAN`</code></pre>
</div>
</div>
<p>Now, all the data files have only 6 columns.</p>
<p><strong><em>Step 2: Rename columns with translation (English headers)</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a named vector of new column names</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Village_Code"</span> <span class="ot">=</span> <span class="st">"KODE KELURAHAN"</span>, <span class="st">"City_Area"</span> <span class="ot">=</span> <span class="st">"WILAYAH KOTA"</span>, <span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"KELURAHAN"</span>, <span class="st">"Target"</span> <span class="ot">=</span> <span class="st">"SASARAN"</span>, <span class="st">"Unvaccinated"</span> <span class="ot">=</span> <span class="st">"BELUM VAKSIN"</span>, <span class="st">"Vaccinated"</span> <span class="ot">=</span> <span class="st">"TOTAL VAKSIN</span><span class="sc">\r\n</span><span class="st">DIBERIKAN"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use map to rename columns in each data frame in the list</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>renamed_list <span class="ot">&lt;-</span> <span class="fu">map</span>(my_data_same_columns, <span class="sc">~</span><span class="fu">rename</span>(.x, <span class="sc">!!!</span>new_names))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><em>Step 3: Create the date column to identify each file of different months in the list</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>date_value_1 <span class="ot">&lt;-</span> <span class="st">"February 27, 2022"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>renamed_list_1 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">1</span>]]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>renamed_list_1<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_1, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>renamed_list_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1517196  1.40e7 2022-02-27
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4592  3.60e4 2022-02-27
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5319  4.48e4 2022-02-27
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5903  4.29e4 2022-02-27
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1649  1.53e4 2022-02-27
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       4030  4.24e4 2022-02-27
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3950  3.33e4 2022-02-27
 8 3175051002   JAKARTA TIMUR     23886 BARU             3344  3.93e4 2022-02-27
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       9382  7.19e4 2022-02-27
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3772  3.38e4 2022-02-27
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>date_value_2 <span class="ot">&lt;-</span> <span class="st">"April 30, 2022"</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>renamed_list_2 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">2</span>]]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>renamed_list_2<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_2, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>renamed_list_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1453423  1.69e7 2022-04-30
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4449  4.31e4 2022-04-30
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5101  5.43e4 2022-04-30
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5699  5.02e4 2022-04-30
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1598  1.88e4 2022-04-30
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       3857  5.11e4 2022-04-30
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3818  3.92e4 2022-04-30
 8 3175051002   JAKARTA TIMUR     23886 BARU             3160  4.92e4 2022-04-30
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       9041  8.52e4 2022-04-30
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3627  4.18e4 2022-04-30
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>date_value_3 <span class="ot">&lt;-</span> <span class="st">"June 30, 2022"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>renamed_list_3 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">3</span>]]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>renamed_list_3<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_3, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>renamed_list_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1431393  1.73e7 2022-06-30
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4402  4.40e4 2022-06-30
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5041  5.56e4 2022-06-30
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5632  5.13e4 2022-06-30
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1576  1.92e4 2022-06-30
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       3791  5.22e4 2022-06-30
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3778  4.00e4 2022-06-30
 8 3175051002   JAKARTA TIMUR     23886 BARU             3110  5.00e4 2022-06-30
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       8917  8.71e4 2022-06-30
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3580  4.27e4 2022-06-30
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>date_value_4 <span class="ot">&lt;-</span> <span class="st">"November 30, 2021"</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>renamed_list_4 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">4</span>]]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>renamed_list_4<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_4, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>renamed_list_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1723821  1.34e7 2021-11-30
 2 3172051003   JAKARTA UTARA     23947 ANCOL            5527  3.39e4 2021-11-30
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5986  4.28e4 2021-11-30
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     6802  4.04e4 2021-11-30
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1920  1.46e4 2021-11-30
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       4612  4.04e4 2021-11-30
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           4346  3.19e4 2021-11-30
 8 3175051002   JAKARTA TIMUR     23886 BARU             3776  3.79e4 2021-11-30
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      10985  6.76e4 2021-11-30
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    4187  3.24e4 2021-11-30
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>date_value_5 <span class="ot">&lt;-</span> <span class="st">"September 30, 2021"</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>renamed_list_5 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">5</span>]]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>renamed_list_5<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_5, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>renamed_list_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         2235772  1.19e7 2021-09-30
 2 3172051003   JAKARTA UTARA     23947 ANCOL            6688  3.06e4 2021-09-30
 3 3173041007   JAKARTA BARAT     29381 ANGKE            7581  3.82e4 2021-09-30
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     8708  3.48e4 2021-09-30
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      2517  1.29e4 2021-09-30
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       6252  3.54e4 2021-09-30
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           5785  2.79e4 2021-09-30
 8 3175051002   JAKARTA TIMUR     23886 BARU             4899  3.45e4 2021-09-30
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      14105  5.85e4 2021-09-30
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    5239  2.90e4 2021-09-30
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>date_value_6 <span class="ot">&lt;-</span> <span class="st">"August 31, 2021"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>renamed_list_6 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">6</span>]]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>renamed_list_6<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_6, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>renamed_list_6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         3277484 9076633 2021-08-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            9191   23691 2021-08-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE           10400   29451 2021-08-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG    12510   24330 2021-08-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      3704    9719 2021-08-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       9416   26987 2021-08-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           8345   21398 2021-08-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             7751   27373 2021-08-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      19908   43332 2021-08-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    8033   22132 2021-08-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>date_value_7 <span class="ot">&lt;-</span> <span class="st">"December 31, 2021"</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>renamed_list_7 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">7</span>]]</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>renamed_list_7<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_7, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>renamed_list_7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1623736  1.37e7 2021-12-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            5062  3.49e4 2021-12-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5626  4.38e4 2021-12-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     6335  4.17e4 2021-12-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1782  1.50e4 2021-12-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       4373  4.13e4 2021-12-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           4169  3.25e4 2021-12-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             3579  3.85e4 2021-12-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      10178  6.97e4 2021-12-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3993  3.30e4 2021-12-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>date_value_8 <span class="ot">&lt;-</span> <span class="st">"January 31, 2022"</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>renamed_list_8 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">8</span>]]</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>renamed_list_8<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_8, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>renamed_list_8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1538221  1.39e7 2022-01-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4647  3.58e4 2022-01-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5388  4.45e4 2022-01-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5967  4.26e4 2022-01-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1678  1.52e4 2022-01-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       4077  4.22e4 2022-01-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3993  3.31e4 2022-01-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             3398  3.91e4 2022-01-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       9516  7.14e4 2022-01-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3813  3.36e4 2022-01-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>date_value_9 <span class="ot">&lt;-</span> <span class="st">"July 31, 2021"</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>renamed_list_9 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">9</span>]]</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>renamed_list_9<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_9, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>renamed_list_9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         4441501 6162928 2021-07-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL           12333   15795 2021-07-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE           13875   20304 2021-07-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG    18314   14418 2021-07-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      5173    6586 2021-07-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS      13775   17716 2021-07-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA          10443   15133 2021-07-31
 8 3175051002   JAKARTA TIMUR     23886 BARU            10063   19941 2021-07-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      28848   26311 2021-07-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    9978   16118 2021-07-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>date_value_10 <span class="ot">&lt;-</span> <span class="st">"March 31, 2022"</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>renamed_list_10 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">10</span>]]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>renamed_list_10<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_10, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>renamed_list_10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1482471  1.60e7 2022-03-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4522  4.03e4 2022-03-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5186  5.13e4 2022-03-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5780  4.75e4 2022-03-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1621  1.76e4 2022-03-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       3947  4.79e4 2022-03-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3889  3.74e4 2022-03-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             3220  4.65e4 2022-03-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       9158  8.07e4 2022-03-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3693  3.96e4 2022-03-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>date_value_11 <span class="ot">&lt;-</span> <span class="st">"May 31, 2022"</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>renamed_list_11 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">11</span>]]</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>renamed_list_11<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_11, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>renamed_list_11</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1445540  1.71e7 2022-05-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            4440  4.36e4 2022-05-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE            5084  5.50e4 2022-05-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     5676  5.08e4 2022-05-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      1589  1.90e4 2022-05-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       3834  5.16e4 2022-05-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           3804  3.96e4 2022-05-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             3147  4.97e4 2022-05-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR       8989  8.62e4 2022-05-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    3609  4.23e4 2022-05-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>date_value_12 <span class="ot">&lt;-</span> <span class="st">"October 31, 2021"</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>renamed_list_12 <span class="ot">&lt;-</span> renamed_list[[<span class="dv">12</span>]]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>renamed_list_12<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_value_12, <span class="at">format =</span> <span class="st">"%B %d, %Y"</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>renamed_list_12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 268 × 7
   Village_Code City_Area        Target Sub_District  Unvac…¹ Vacci…² date      
   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
 1 &lt;NA&gt;         &lt;NA&gt;            8941211 TOTAL         1880524  1.28e7 2021-10-31
 2 3172051003   JAKARTA UTARA     23947 ANCOL            5991  3.25e4 2021-10-31
 3 3173041007   JAKARTA BARAT     29381 ANGKE            6557  4.10e4 2021-10-31
 4 3175041005   JAKARTA TIMUR     29074 BALE KAMBANG     7586  3.79e4 2021-10-31
 5 3175031003   JAKARTA TIMUR      9752 BALI MESTER      2125  1.39e4 2021-10-31
 6 3175101006   JAKARTA TIMUR     26285 BAMBU APUS       5014  3.86e4 2021-10-31
 7 3174031002   JAKARTA SELATAN   21566 BANGKA           4742  3.04e4 2021-10-31
 8 3175051002   JAKARTA TIMUR     23886 BARU             4089  3.65e4 2021-10-31
 9 3175041004   JAKARTA TIMUR     47898 BATU AMPAR      12196  6.36e4 2021-10-31
10 3171071002   JAKARTA PUSAT     21494 BENDUNGAN HI…    4492  3.12e4 2021-10-31
# … with 258 more rows, and abbreviated variable names ¹​Unvaccinated,
#   ²​Vaccinated</code></pre>
</div>
</div>
<p><strong><em>Step 4: Join all aspatial files to one combined csv</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>combined_aspatial <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(renamed_list_1,renamed_list_2,renamed_list_3,renamed_list_4,renamed_list_5,renamed_list_6,renamed_list_7, renamed_list_8,renamed_list_9,renamed_list_10,renamed_list_11, renamed_list_12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Yay! We have successfully joined all 12 files!</p>
</section>
</section>
</section>
<section id="joining-geospatial-aspatial-data-frames" class="level1">
<h1>5. Joining Geospatial &amp; Aspatial data frames</h1>
<p>Now that we have both Geospatial &amp; Aspatial data sets cleaned, we will have to join both of them together in order to get location and vaccine rate data compiled into one file for map plotting analysis later on.</p>
<p>Let us first take a quick look at their headers to tell us what are their common fields are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(bd_jakarta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Object_ID"        "Village_Code"     "Village"          "Code"            
 [5] "Province"         "City"             "District"         "Sub_District"    
 [9] "Total_Population" "geometry"        </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(combined_aspatial)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Village_Code" "City_Area"    "Target"       "Sub_District" "Unvaccinated"
[6] "Vaccinated"   "date"        </code></pre>
</div>
</div>
<p>According to the output columns, it seems that these are the possible fields we can make a join:</p>
<ul>
<li><p>Village_Code -&gt; Village_Code</p></li>
<li><p>City -&gt; City_Area</p></li>
<li><p>Sub_District -&gt; Sub_District</p></li>
</ul>
<p>They should match up and give us a joined file! Let’s try!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>combined_Jakarta_district_level <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bd_jakarta, combined_aspatial,<span class="at">by=</span><span class="fu">c</span>(</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Village_Code"</span><span class="ot">=</span><span class="st">"Village_Code"</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"City"</span><span class="ot">=</span><span class="st">"City_Area"</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"Sub_District"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Yes! We have successfully joined the two data files together :)</p>
<p>Next, let’s visualise our current “combined_Jakarta_district_level” in terms of target vaccine count and unvaccinated count (take note that it is important to converts the data frame to a spatial object of class “sf”, which is required for making spatial visualizations with tmap):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>combined_Jakarta_district_level <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(combined_Jakarta_district_level)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>prelim_target <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_Jakarta_district_level)<span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Target"</span>) <span class="sc">+</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Preliminary Target Count"</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>prelim_Unvaccinated <span class="ot">=</span> <span class="fu">tm_shape</span>(combined_Jakarta_district_level)<span class="sc">+</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Unvaccinated"</span>) <span class="sc">+</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Preliminary Unvaccinated Count"</span>)</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(prelim_target, prelim_Unvaccinated)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="investigating-correcting-mismatched-sub_district-records" class="level2">
<h2 class="anchored" data-anchor-id="investigating-correcting-mismatched-sub_district-records">5.1 Investigating &amp; Correcting Mismatched Sub_District Records</h2>
<p>As seen from the output maps above, there are some ‘missing’ values even though we have done our data cleaning for both sets of data earlier. I suspect that this could be due to a mismatch in naming conventions, such as using “Hello” and “Hallo” in both data files, which results in these sub-districts being recognized as separate entities.</p>
<p>However, this is just my assumption! Let us now investigate the sub_district field:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checks for unique values of Sub_District in cases_jakarta that aren't already present in bd_jakarta and vice versa</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>combined_aspatial_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(combined_aspatial<span class="sc">$</span>Sub_District)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>bd_subdistrict <span class="ot">&lt;-</span> <span class="fu">c</span>(bd_jakarta<span class="sc">$</span>Sub_District)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(combined_aspatial_subdistrict[<span class="sc">!</span>(combined_aspatial_subdistrict <span class="sc">%in%</span> bd_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "TOTAL"                 "BALE KAMBANG"          "HALIM PERDANA KUSUMAH"
 [4] "JATI PULO"             "KAMPUNG TENGAH"        "KERENDANG"            
 [7] "KRAMAT JATI"           "PAL MERIAM"            "PINANG RANTI"         
[10] "PULAU HARAPAN"         "PULAU KELAPA"          "PULAU PANGGANG"       
[13] "PULAU PARI"            "PULAU TIDUNG"          "PULAU UNTUNG JAWA"    
[16] "RAWA JATI"            </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bd_subdistrict[<span class="sc">!</span>(bd_subdistrict <span class="sc">%in%</span> combined_aspatial_subdistrict)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "KRENDANG"             "RAWAJATI"             "TENGAH"              
[4] "BALEKAMBANG"          "PINANGRANTI"          "JATIPULO"            
[7] "PALMERIAM"            "KRAMATJATI"           "HALIM PERDANA KUSUMA"</code></pre>
</div>
</div>
<p>From the code chunks above, we realised several naming mismatches between the two data fields. In order to correct them, we will begin by creating a data frame that includes the correct spellings for both aspatial_cases and geospatial_bd subdistricts. We will then output this information into a “kable” format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>spelling <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Aspatial_Cases=</span><span class="fu">c</span>(<span class="st">"BALE KAMBANG"</span>, <span class="st">"HALIM PERDANA KUSUMAH"</span>, <span class="st">"JATI PULO"</span>,<span class="st">"KERENDANG"</span>,<span class="st">"KRAMAT JATI"</span>, <span class="st">"PAL MERIAM"</span>, <span class="st">"PINANG RANTI"</span>, <span class="st">"RAWA JATI"</span>, <span class="st">"KAMPUNG TENGAH"</span>),</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Geospatial_BD=</span><span class="fu">c</span>(<span class="st">"BALEKAMBAG"</span>, <span class="st">"HALIM PERDANA KUSUMA"</span>, <span class="st">"JATIPULO"</span>, <span class="st">"KRENDANG"</span>,<span class="st">"KRAMATJATI"</span>,<span class="st">"PALMERIAM"</span>, <span class="st">"PINANGRANTI"</span>, <span class="st">"RAWAJATI"</span>, <span class="st">"TENGAH"</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># with dataframe a input, outputs a kable</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(spelling, <span class="at">caption=</span><span class="st">"Mismatched Records"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_material</span>(<span class="st">"hover"</span>, <span class="at">latex_options=</span><span class="st">"scale_down"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class=" lightable-material lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>Mismatched Records</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Aspatial_Cases </th>
   <th style="text-align:left;"> Geospatial_BD </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> BALE KAMBANG </td>
   <td style="text-align:left;"> BALEKAMBAG </td>
  </tr>
  <tr>
   <td style="text-align:left;"> HALIM PERDANA KUSUMAH </td>
   <td style="text-align:left;"> HALIM PERDANA KUSUMA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> JATI PULO </td>
   <td style="text-align:left;"> JATIPULO </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KERENDANG </td>
   <td style="text-align:left;"> KRENDANG </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KRAMAT JATI </td>
   <td style="text-align:left;"> KRAMATJATI </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PAL MERIAM </td>
   <td style="text-align:left;"> PALMERIAM </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PINANG RANTI </td>
   <td style="text-align:left;"> PINANGRANTI </td>
  </tr>
  <tr>
   <td style="text-align:left;"> RAWA JATI </td>
   <td style="text-align:left;"> RAWAJATI </td>
  </tr>
  <tr>
   <td style="text-align:left;"> KAMPUNG TENGAH </td>
   <td style="text-align:left;"> TENGAH </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Now that we know exactly which sub-district records are mismatched, we need to rectify the mismatches by remaining them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># where bd_jakarta is a mismatched value, replace with the correct value</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'BALEKAMBANG'</span>] <span class="ot">&lt;-</span> <span class="st">'BALE KAMBANG'</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'HALIM PERDANA KUSUMA'</span>] <span class="ot">&lt;-</span> <span class="st">'HALIM PERDANA KUSUMAH'</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'JATIPULO'</span>] <span class="ot">&lt;-</span> <span class="st">'JATI PULO'</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRENDANG'</span>] <span class="ot">&lt;-</span> <span class="st">'KERENDANG'</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'KRAMATJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'KRAMAT JATI'</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PALMERIAM'</span>] <span class="ot">&lt;-</span> <span class="st">'PAL MERIAM'</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'PINANGRANTI'</span>] <span class="ot">&lt;-</span> <span class="st">'PINANG RANTI'</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'RAWAJATI'</span>] <span class="ot">&lt;-</span> <span class="st">'RAWA JATI'</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>bd_jakarta<span class="sc">$</span>Sub_District[bd_jakarta<span class="sc">$</span>Sub_District <span class="sc">==</span> <span class="st">'TENGAH'</span>] <span class="ot">&lt;-</span> <span class="st">'KAMPUNG TENGAH'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Corrected them! Now, we have a standardised common identifier among our geospatial and aspatial dataframes. Let’s join them once more:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>joined_cleared_mismatched <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bd_jakarta, combined_aspatial,</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"Sub_District"</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s once again visualise our updated “combined_Jakarta_district_level” in terms of target vaccine count and unvaccinated count at sub_district level to check if all missing values have been removed and cleared!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>prelim_target <span class="ot">=</span> <span class="fu">tm_shape</span>(joined_cleared_mismatched)<span class="sc">+</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Target"</span>) <span class="sc">+</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Preliminary Target Count"</span>)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>prelim_Unvaccinated <span class="ot">=</span> <span class="fu">tm_shape</span>(joined_cleared_mismatched)<span class="sc">+</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"Unvaccinated"</span>) <span class="sc">+</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title=</span><span class="st">"Preliminary Unvaccinated Count"</span>)</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(prelim_target, prelim_Unvaccinated)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Done! We have successfully removed all the missing values! We can now move on to our next section of visualisation and analysis.</p>
</section>
</section>
<section id="calculations" class="level1">
<h1>6. Calculations</h1>
<p>Before we prepare the monthly vaccination rate maps, we need to first <strong>compute the monthly vaccinate rate from July 2021 to June 2022 at sub-district</strong> <strong>level</strong> (also known as KELURAHAN in Bahasa Indonesia). The formula to calculate this should be:</p>
<p><span class="math display">\[
Monthly Vaccination Rate = ((Target-Total unvaccinated count) / Target)*100)
\]</span></p>
<p>We are using target instead of population because for the case of vaccination, there are several rounds ie booster jabs etc therefore, taking the population would not be accurate in calculating the monthly vaccine rate for each sub-district level. We will use the target vaccine count instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>vaccine_rate <span class="ot">&lt;-</span> combined_aspatial <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(bd_jakarta, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span> <span class="ot">=</span> <span class="st">"Sub_District"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sub_District, date) <span class="sc">%&gt;%</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="st">`</span><span class="at">MonthlyVaccinationRate</span><span class="st">`</span> <span class="ot">=</span> ((Target<span class="sc">-</span>Unvaccinated)<span class="sc">/</span>Target)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> date,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> MonthlyVaccinationRate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we will also need to join the “vaccine_rate” data frame with the “bd_jakarta” data frame using the “Sub_District” variable as a common identifier. The resulting data frame will contain all the variables from both data frames where the “Sub_District” values match.</p>
<p>The second line of code in the code chunk below converts the joined data frame to a spatial object of class “sf” using the “st_as_sf” function. This is necessary in order to make spatial visualizations and analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>vaccine_rate <span class="ot">&lt;-</span> vaccine_rate <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(bd_jakarta, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Sub_District"</span><span class="ot">=</span><span class="st">"Sub_District"</span>))</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>vaccine_rate <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(vaccine_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mapping-monthly-vaccine-rate-12-months" class="level1">
<h1>7. Mapping Monthly Vaccine Rate (12 months)</h1>
<p>Let’s try to plot the data for one month first!</p>
<p>The first line of code sets the plotting mode to “plot” which means that the map will be displayed on the plotting device.</p>
<p>The second line of code sets the data to be plotted using “tm_shape” and specifies that we want to fill polygons using the “2022-02-27” variable. The “n” argument specifies the number of classes to be used for the classification, and “style” argument specifies the classification method (in this case, “jenks”). The “title” argument sets the title of the legend.</p>
<p>The third line of code sets the layout of the map using “tm_layout”. The “main.title” argument sets the title of the map, and “main.title.position” and “main.title.size” arguments specify the position and size of the title. The “legend.height” and “legend.width” arguments specify the dimensions of the legend box, and the “frame” argument adds a frame around the legend.</p>
<p>Finally, the “tm_borders” function adds borders around each polygon with transparency set to 0.5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing for one month</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(vaccine_rate)<span class="sc">+</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"2022-02-27"</span>, </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"jenks"</span>, </span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Vaccine Rate"</span>) <span class="sc">+</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">"Distribution of COVID-19 Vaccine Rate in February 2022"</span>,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="dv">1</span>,</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.height =</span> <span class="fl">0.5</span>, </span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.width =</span> <span class="fl">0.4</span>,</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, as we will need 12 months maps to visualise the trends, we will create a helper function to do this!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to prepare for plotting 12 months maps</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>jenks_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, varname) {</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(vaccine_rate) <span class="sc">+</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df) <span class="sc">+</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_fill</span>(varname, </span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">n=</span> <span class="dv">6</span>,</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">"jenks"</span>, </span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Vaccine Rate"</span>) <span class="sc">+</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">main.title =</span> varname,</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.position =</span> <span class="st">"center"</span>,</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">main.title.size =</span> <span class="fl">1.2</span>,</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.height =</span> <span class="fl">0.45</span>, </span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.width =</span> <span class="fl">0.35</span>,</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">frame =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s visualise the jenks plots for all months:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split it up into multiple arranges to make it easier to see</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-07-31"</span>),</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-08-31"</span>),</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-09-30"</span>),</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-10-31"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-11-30"</span>),</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2021-12-31"</span>),</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-01-31"</span>),</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-02-27"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(<span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-03-31"</span>),</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-04-30"</span>),</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-05-31"</span>),</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">jenks_plot</span>(vaccine_rate, <span class="st">"2022-06-30"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">7.1 Analysis</h2>
<p>The aim of utilizing choropleth analysis in this section is to gain insights into the progress of vaccination rates over time and pinpoint the sub-districts that exhibit the most notable vaccination rates between July 2021 and June 2022. Based on the twelve maps presented, we can derive the following observations:</p>
<ul>
<li><p>The general trend of the vaccine spread (regardless of sub-districts) in DKI, Jakarta seems to be increasing over time where the peak was in the last quarter and the color gradient shifted gradually from yellow to red in the subsequent two quarters.</p></li>
<li><p>From the 12 maps, it is evident that February 2022 stands out as the month with the highest concentration of the darkest shaded areas, indicating a widespread push by the government for nationwide vaccination during that specific month and year.</p></li>
<li><p>By the end of 2022 June, out of all the sub-districts in DKI Jakarta, HALIM&nbsp;PERDANA&nbsp;KUSUMAH has the largest number of vaccinated individuals. On the other hand, KEBON&nbsp;MELATI has the lowest number of vaccinated individuals.</p></li>
</ul>
</section>
</section>
<section id="local-gi-analysis" class="level1">
<h1>8. Local Gi* Analysis</h1>
<section id="computing-local-gi-statistics" class="level2">
<h2 class="anchored" data-anchor-id="computing-local-gi-statistics">8.1 Computing local Gi* statistics</h2>
<p>Emerging Hot Spot Analysis (EHSA) is a spatio-temporal analysis method for revealing and describing how hot spot and cold spot areas evolve over time. The analysis consist of four main steps:</p>
<ul>
<li><p>Building a space-time cube,</p></li>
<li><p>Calculating Getis-Ord local Gi* statistic for each bin by using an FDR correction,</p></li>
<li><p>Evaluating these hot and cold spot trends by using Mann-Kendall trend test,</p></li>
<li><p>Categorising each study area location by referring to the resultant trend z-score and p-value for each location with data, and with the hot spot z-score and p-value for each bin.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns: Sub_District, Target, Unvaccinated and date from joined_cleared_mismatched</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>vacc_attr_table <span class="ot">&lt;-</span> joined_cleared_mismatched <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">8</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">15</span>) <span class="sc">%&gt;%</span> <span class="fu">st_drop_geometry</span>()</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="co">#create a new vaccination column with the calculated vaccination rate for each row</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>vacc_attr_table<span class="sc">$</span>vaccintion_rate <span class="ot">&lt;-</span> (vacc_attr_table<span class="sc">$</span>Target <span class="sc">-</span> vacc_attr_table<span class="sc">$</span>Unvaccinated) <span class="sc">/</span> vacc_attr_table<span class="sc">$</span>Target<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract only the date, sub_district, and vaccination rate</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>vacc_attr_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(vacc_attr_table <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><em>Step 1: Creating a time series cube</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>vacc_st <span class="ot">&lt;-</span> <span class="fu">spacetime</span>(vacc_attr_table, bd_jakarta,</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">.loc_col =</span> <span class="st">"Sub_District"</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">.time_col =</span> <span class="st">"date"</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co">#check if vacc_st is spacetime_cube valid before moving on</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is_spacetime</span>(vacc_st)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_spacetime_cube</span>(vacc_st)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>The TRUE return confirms that vacc_st object is indeed an time-space cube that means the observations for locations are complete!</p>
<p><strong><em>Step 2: Computing Gi*</em></strong></p>
<p>The code chunk below will be used to identify neighbors to derive an inverse distance weights.</p>
<ul>
<li><p>activate() is used to activate the geometry context</p></li>
<li><p>mutate() is used to create two new columns nb and wt</p></li>
<li><p>Then we will activate the data context again and copy over the nb and wt columns to each time-slick using set_wts() and set_nbs()</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>vacc_nb <span class="ot">&lt;-</span> vacc_st <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">"geometry"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nb =</span> <span class="fu">include_self</span>(<span class="fu">st_contiguity</span>(geometry)),</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">wt =</span> <span class="fu">st_inverse_distance</span>(nb, geometry,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">alpha =</span> <span class="dv">1</span>),</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_wts</span>(<span class="st">"wt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_nbs</span>(<span class="st">"nb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><em>Step 3: Manually calculate the local Gi* for each location (group by date)</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>gi_stars <span class="ot">&lt;-</span> vacc_nb <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gi_star =</span> <span class="fu">local_gstar_perm</span>(</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    vaccintion_rate, nb, wt)) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">unnest</span>(gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>**Not sure why I cant populate my Gi* graphs and I am running out of time! Will work on it again to test :D Here’s my broken code chunks</p>
<p>(1) #error in gi_stars not sf object! tmap_mode(“plot”) tm_shape(gi_stars) + tm_fill(“gi_star”) + tm_borders(alpha = 0.5) + tm_view(set.zoom.limits = c(6,8))</p>
<p>(2) #error in gi_stars not sf object! tmap_mode(“plot”) tm_shape(gi_stars) + tm_fill(“p_sim”) + tm_borders(alpha = 0.5)</p>
</section>
</section>
<section id="emerging-hot-spot-analysis-ehsa" class="level1">
<h1><strong>9.Emerging Hot Spot Analysis (EHSA)</strong></h1>
<section id="mann-kendall-test" class="level2">
<h2 class="anchored" data-anchor-id="mann-kendall-test">9.1 Mann-Kendall Test</h2>
<p>The Mann-Kendall Test is a statistical test used to detect trends in time series data. It does not require any assumptions about the distribution of data.</p>
<p>The purpose of the Mann-Kendall test is to determine whether there is a significant trend in a time series, and if so, whether the trend is increasing or decreasing over time. The test is based on the ranks of the data values, rather than the actual values themselves, which makes it robust to outliers and other types of data anomalies.</p>
<p>If the p-value of the test is less than a pre-determined significance level (e.g., 0.05), then we can conclude that there is a significant trend in the data.</p>
<p>As stated in the assignment, we will need to select three sub-districts and describe the temporal trends, the three sub-districts I selected are as below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sub_district -- LAGAO</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>lagoa_MK <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"LAGOA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, date, gi_star)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sub_district -- KOJA</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>koja_MK <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"KOJA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, date, gi_star)</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Sub_district -- ROROTAN</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>rorotan_MK <span class="ot">&lt;-</span> gi_stars <span class="sc">%&gt;%</span> </span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sub_District <span class="sc">==</span> <span class="st">"ROROTAN"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sub_District, date, gi_star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we will plot the result by using ggplot2 functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> lagoa_MK, </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> date, </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b1b2855c0573f99daf32" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b1b2855c0573f99daf32">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[-0.958271799617265,-1.95815847292875,-3.4031210589691,-4.05190467104134,-4.15535868336662,-3.71738118020346,-3.01562543654907,-2.77477744724234,-2.86407761311519,-2.37872128273544,-2.43842652321615,-2.11688157464002],"text":["date: 2021-07-31<br />gi_star: -0.9582718","date: 2021-08-31<br />gi_star: -1.9581585","date: 2021-09-30<br />gi_star: -3.4031211","date: 2021-10-31<br />gi_star: -4.0519047","date: 2021-11-30<br />gi_star: -4.1553587","date: 2021-12-31<br />gi_star: -3.7173812","date: 2022-01-31<br />gi_star: -3.0156254","date: 2022-02-27<br />gi_star: -2.7747774","date: 2022-03-31<br />gi_star: -2.8640776","date: 2022-04-30<br />gi_star: -2.3787213","date: 2022-05-31<br />gi_star: -2.4384265","date: 2022-06-30<br />gi_star: -2.1168816"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-4.31521302755409,-0.798417455429797],"tickmode":"array","ticktext":["-4","-3","-2","-1"],"tickvals":[-4,-3,-2,-1],"categoryorder":"array","categoryarray":["-4","-3","-2","-1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"501c26b313bb":{"x":{},"y":{},"type":"scatter"}},"cur_data":"501c26b313bb","visdat":{"501c26b313bb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> koja_MK, </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> date, </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6906935f9519fc6b093d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6906935f9519fc6b093d">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[0.13396231499914,-0.866032107539603,-1.88625306448698,-2.13694299685685,-2.54106298977736,-1.54592983432911,-1.41759070561692,-1.39739726680578,-1.33948755344763,-0.982095066672688,-1.1190292063456,-0.803377116199028],"text":["date: 2021-07-31<br />gi_star:  0.1339623","date: 2021-08-31<br />gi_star: -0.8660321","date: 2021-09-30<br />gi_star: -1.8862531","date: 2021-10-31<br />gi_star: -2.1369430","date: 2021-11-30<br />gi_star: -2.5410630","date: 2021-12-31<br />gi_star: -1.5459298","date: 2022-01-31<br />gi_star: -1.4175907","date: 2022-02-27<br />gi_star: -1.3973973","date: 2022-03-31<br />gi_star: -1.3394876","date: 2022-04-30<br />gi_star: -0.9820951","date: 2022-05-31<br />gi_star: -1.1190292","date: 2022-06-30<br />gi_star: -0.8033771"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.67481425501618,0.267713580237965],"tickmode":"array","ticktext":["-2","-1","0"],"tickvals":[-2,-1,0],"categoryorder":"array","categoryarray":["-2","-1","0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"501c64796376":{"x":{},"y":{},"type":"scatter"}},"cur_data":"501c64796376","visdat":{"501c64796376":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> rorotan_MK, </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> date, </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> gi_star)) <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-cdb26d6a586252ba9f42" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-cdb26d6a586252ba9f42">{"x":{"data":[{"x":[18839,18870,18900,18931,18961,18992,19023,19050,19082,19112,19143,19173],"y":[1.12129709297996,1.07150384820258,-0.785133799265371,-1.58979058851316,-1.66901471100558,-1.54424976484813,-1.33978348101618,-1.33029550287684,-1.30614967622199,-0.922858590258997,-0.846690543942755,-0.864259669607546],"text":["date: 2021-07-31<br />gi_star:  1.1212971","date: 2021-08-31<br />gi_star:  1.0715038","date: 2021-09-30<br />gi_star: -0.7851338","date: 2021-10-31<br />gi_star: -1.5897906","date: 2021-11-30<br />gi_star: -1.6690147","date: 2021-12-31<br />gi_star: -1.5442498","date: 2022-01-31<br />gi_star: -1.3397835","date: 2022-02-27<br />gi_star: -1.3302955","date: 2022-03-31<br />gi_star: -1.3061497","date: 2022-04-30<br />gi_star: -0.9228586","date: 2022-05-31<br />gi_star: -0.8466905","date: 2022-06-30<br />gi_star: -0.8642597"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18822.3,19189.7],"tickmode":"array","ticktext":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"tickvals":[18901,18993,19083,19174],"categoryorder":"array","categoryarray":["Oct 2021","Jan 2022","Apr 2022","Jul 2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.80853030120486,1.26081268317924],"tickmode":"array","ticktext":["-1","0","1"],"tickvals":[-1,0,1],"categoryorder":"array","categoryarray":["-1","0","1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"gi_star","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"501c7b6f1a20":{"x":{},"y":{},"type":"scatter"}},"cur_data":"501c7b6f1a20","visdat":{"501c7b6f1a20":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="analysis-1" class="level3">
<h3 class="anchored" data-anchor-id="analysis-1">9.1.1 Analysis</h3>
<p>The Mann-Kendall statistical test for trend generated above is used to assess whether a set of data values is increasing over time or decreasing over time, and whether the trend in either direction is statistically significant. The Mann-Kendall test does NOT assess the magnitude of change. We will form two hypothesis first:</p>
<ul>
<li><p>Null Hypothesis: There is no monotonic trend in the series</p></li>
<li><p>Alternate Hypothesis: A trend exists. This trend can be positive, negative, or non-null</p></li>
</ul>
<p>Now, let us analyse the charts generated for the three selected sub-districts: LAGAO, KOJA, and ROROTAN.</p>
<ul>
<li>The gi_star value for LAGAO sub-district is in the range of -1 to -4, for KOJA sub-district is 0 to -2, and for ROROTAN is 1 to -1.</li>
</ul>
<!-- -->
<ul>
<li><p>One similarity between all the three line charts is that there is an obvious drastic dropped in gi_star around the period October 2021 to Mid January 2022.</p></li>
<li><p>From the three charts generated, we can tell that all of them have a negative trend.</p></li>
</ul>
</section>
</section>
<section id="ehsa-map-of-the-gi-values-of-vaccination-rate" class="level2">
<h2 class="anchored" data-anchor-id="ehsa-map-of-the-gi-values-of-vaccination-rate">9.2 EHSA map of the Gi* values of vaccination rate</h2>
<p>Lastly, we will perform EHSA analysis by using emerging_hotspot_analysis() of sfdep package. It takes a spacetime object x (vacc_st), and the variable of interest which in this case is vaccintion_rate.</p>
<p>The k argument is used to specify the number of time lags which is set to 1 by default and nsim map numbers of simulation to be performed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>ehsa <span class="ot">&lt;-</span> <span class="fu">emerging_hotspot_analysis</span>(</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> vacc_st, </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">.var =</span> <span class="st">"vaccintion_rate"</span>, </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">1</span>, </span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nsim =</span> <span class="dv">99</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="visualising-ehsa" class="level3">
<h3 class="anchored" data-anchor-id="visualising-ehsa">9.2.1 Visualising EHSA</h3>
<p>Next, we will visualise the distribution of EHSA classes in bar chart using ggplot2 function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ehsa,</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> classification)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, we will need to join both bd_jakarta and ehsa together before we can plot maps and do any visualisation. The code chunk below illustrate how it’s done:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>vaccine_ehsa <span class="ot">&lt;-</span> bd_jakarta <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ehsa,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">join_by</span>(Sub_District <span class="sc">==</span> location))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, tmap functions will be used to plot a categorical choropleth map by using the code chunk below.</p>
<p>The map will only display the significant (i.e.&nbsp;p-value &lt;0.05).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>ehsa_sig <span class="ot">&lt;-</span> vaccine_ehsa  <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(vaccine_ehsa) <span class="sc">+</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(ehsa_sig) <span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"classification"</span>) <span class="sc">+</span> </span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take_Home_Ex02_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="analysis-2" class="level3">
<h3 class="anchored" data-anchor-id="analysis-2">9.2.2 Analysis</h3>
<p>From the above generated map, we can tell that most of the classification are oscilating hotspot which means less than 90% of the time-step intervals have been statistically significant hot spots. The next higher classification is sporafic coldspot which means less than 90% of the time-step intervals have been statistically significant cold spots and none of the time-step intervals have been statistically significant cold spots.</p>
</section>
</section>
</section>
<section id="references-resources-used" class="level1">
<h1>10. References &amp; Resources Used</h1>
<p>Here are the list of resources used in this analysis, as well as their links. Special thanks to Seniors work samples and Prof Kam for all the detailed explanations and clear documentary posted!! :))</p>
<p>https://www.researchgate.net/figure/The-Mann-Kendall-Z-Statistics-for-Monthly-Trend-Analysis_fig2_330824269</p>
<p>https://link.springer.com/article/10.1007/s11524-020-00468-0</p>
<p>https://www.statisticshowto.com/wp-content/uploads/2016/08/Mann-Kendall-Analysis-1.pdf</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>